{% if contactUs.groups|length > 2 %}
  {% set contactUsAccordion = true %}
{% endif %}
<section 
  class="ma__contact-us {{contactUsAccordion ? 'ma__contact-us--accordion js-accordion' : ''}}"
  {% if contactUs.schemaSd.property and contactUs.schemaSd.type %} 
    property="{{contactUs.schemaSd.property}}" 
    typeof="{{contactUs.schemaSd.type}}"
  {% endif %} >

  {# title should always be an h3 #}
  {% if contactUs.compHeading %}
    {% set compHeading = contactUs.compHeading|merge({"sub":true}) %}
    {% include "@atoms/04-headings/comp-heading.twig" %}
  {% endif %}
  {% if contactUs.sidebarHeading %}
    {% set sidebarHeading = contactUs.sidebarHeading %}
    {% include "@atoms/04-headings/sidebar-heading.twig" %}
  {% endif %}

  {% if contactUs.subTitle %}
    {% set columnHeading = contactUs.subTitle %}
    {% include "@atoms/04-headings/column-heading.twig" %}
  {% endif %}

  {# Show first 2 contact groups outside of accordion #}
  {% for contactGroup in contactUs.groups[:2] %}
    {% include "@molecules/contact-group.twig" %}
  {% endfor %}

  {# Show 3rd+ contact groups inside of accordion (if they exist) #}
  {% if contactUsAccordion %}
    <div class="ma__contact-us__extra js-accordion-content">
    {% for contactGroup in contactUs.groups[2:last] %}
      {% include "@molecules/contact-group.twig" %}
    {% endfor %}
    </div> {# end ma__contact-us__extra #}
    <div class="ma__contact-us__expand">
      <button class="js-accordion-link">
        <span>more</span><span>less</span> contact info
      </button>
    </div>
  {% endif %}
</section>
